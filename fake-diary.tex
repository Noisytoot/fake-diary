\documentclass[UTF8]{tufte-book}

%% Unicode support
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage{minted}
\usepackage{gensymb}
\usepackage{hyperref}
\usepackage{haskelllogo}
\usepackage[
  type={CC},
  modifier={by-sa},
  version={4.0},
]{doclicense}
\usepackage{graphicx}
\graphicspath{ {./images/} }

\newcommand{\warning}[1]{\textbf{\textit{WARNING: #1}}}
\newcommand{\called}[1]{called \textit{#1}}
\newcommand{\wts}{WTS\texttrademark}
\newcommand{\WTS}{Watermelon Transport System\texttrademark}
\newcommand{\sts}{STS\texttrademark}
\newcommand{\STS}{Strawberry Transport System\texttrademark}

\newenvironment{entry}[2] %% date, heading
{\noindent\textbf{#2}\marginnote{#1}\\}{\vspace{0.5cm}}

\usepackage{makeidx} %% Index
\makeindex

\title{A fake diary}
\author{Ron}
\date{2019-07-06}

\begin{document}
\frontmatter
\maketitle
\doclicenseThis
\newpage
\warning{THIS IS A FAKE DIARY}

Welcome to this fake diary, written in \LaTeX{} (\textbf{not} pronounced like the rubber)

\begin{entry}{2020-07-06}{Ahhaa}
  Hello, I like \LaTeX, and today I went to the science museum in Tartu (\called{``Ahhaa''}).
  \textit{Ahhaa} has a \textbf{enormous} chair and table, on which one can sit, and pretend to drink from a \textbf{enormous} mug.
  I sat on the chair, and a giant came, and nearly sat on the chair I was sitting on,
  but I notified it (him/her) that I was sitting there,
  by shouting ``Mi sidas \^ci tie'' \footnote{Giants speak Esperanto (it is the international language)}\newline
\end{entry}
\begin{entry}{2020-07-07}{Scheme}
  I like Scheme
  
  ``Hello, world!'' in Scheme:
  \begin{minted}[breaklines]{scheme}
    ;; Should work in most Schemes
    (display "Hello, world!")
    (newline)
  \end{minted}
  Scheme is a functional programming language (although it is not a pure functional programming language), and a dialect of lisp.
  Scheme implementations require Tail Call Optimization (TCO), so that tail calls do not cause stack overflows, and has no loops.
  It is a Lisp-1, which means that functions and variable use the same namespace\newline
  A function that takes 1 parameter, called name, and says hello to it:
  \begin{minted}[breaklines]{scheme}
    (define (hello name)
      (display "Hello, ")
      (display name)
      (display "!")
      (newline))
  \end{minted}
  or
  \begin{minted}[breaklines]{scheme}
    ;; This is equivalent to the one above because Scheme is a Lisp-1
    ;; So a variable containing a lambda is equivalent to a function
    (define hello (lambda name
                    (display "Hello, ")
                    (display name)
                    (display "!")
                    (newline)))
  \end{minted}
\end{entry}
\begin{entry}{2020-07-08}{Watermelon}
  At 10:25:31 it was 28.5322313342\celsius\newline
  I went into the basement, where there was a lake, which I went round.
  Past the lake there was a store of watermelons (in case of a hard brexit, and for other purposes),
  so I sent a watermelon through the \WTS{} (\wts) to the main house, and went back.
  I then received the watermelon from the \WTS, and ate it, which I enjoyed \textit{very} much.\newline
\end{entry}
\begin{entry}{2020-07-09}{Strawberries}
  I had grown so many strawberries, that I had an overflow of strawberries, so I sold some of them today,
  and made a profit of \texteuro{}10000 \footnote{Because the giant bought a lot of them}.
  The strawberry store is past the watermelon store, and uses the \STS{} (\sts),
  which is designed for strawberries, instead of the \WTS.\newline
\end{entry}
\begin{entry}{2020-07-10}{Cat in the \WTS}
  I have a cat in the basement, that sometimes eats the watermelons and strawberries,
  today the cat tried to eat a watermelon while it was in the \WTS.
  The cat entered the \WTS{} just after the watermelon, and ate part of it while in the \WTS.
  It then arrived, with the partially-eaten watermelon, at the main house.
  The cat enjoyed\footnote{It was fun} going through the \WTS.\newline
\end{entry}
\begin{entry}{2020-07-11}{Cogs}
  \warning{THIS IS IMPOSSIBLE}
  
  I have a cog\footnote{A portmanteau of ``Cat'', and ``Dog'', other combinations include ``Dat'', ``Dot'', and ``Cag''},
  which is a mixture between a cat, and a dog.
  They have all of the good bits of cats \& dogs, but not the bad bits.
  They are bigger inside than outside, and even have a house with Internet, running water, electricity, and sewage inside them.
  Feeding them is optional, and they can move around, swim, go underwater, fly, and go into space.
  A dat is the opposite of a cog, with the bad bits of cats \& dogs, but not the good bits.
  Inverse dats are the same as cogs but cheaper\footnote{Cog: \texteuro{}100, Inverse dat: \texteuro{}50}.
  You can even modify them after you have bought them, like changing the colour.\newline
\end{entry}
\begin{entry}{2020-07-12}{The Haskell Cave}
  I went into the Haskell Cave with my Thorfire VG-15S

  \includegraphics{PathToTheCave}

  There is a Haskell logo \haskelllogo[scale=.125] in the cave:

  \haskelllogo

  And also:
  \begin{minted}[breaklines]{haskell}
    module Main (main) where
    main :: IO ()
    main = putStr $ unlines [ "Welcome to the Haskell Cave!"
                            , "There are cave paintings with Haskell here"
                            , "There is a monad machine here, to put you into a monad (like from a Person to an IO Person)"]
  \end{minted}
  And a factorial program:
  \begin{minted}[breaklines]{haskell}
    module Factorial (factorial) where
    import Numeric.Natural
    factorial :: Natural -> Natural
    factorial 0 = 1
    factorial n = n * factorial (n - 1)
  \end{minted}
  And a command line interface for it:
  \begin{minted}[breaklines]{haskell}
    module Main (main) where
    import Numeric.Natural
    import System.Environment
    import Factorial
    main :: IO ()
    main = getArgs >>= command
    command :: [String] -> IO ()
    command [] = do
      name <- getProgName
      putStrLn $ name ++ number
    command [number] =
      let n = read number :: Natural in
        print $ factorial n
  \end{minted}
\end{entry}
\end{document}
